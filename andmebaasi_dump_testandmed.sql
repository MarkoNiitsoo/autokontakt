-- H2 2.2.224;
;             
CREATE USER IF NOT EXISTS "SA" SALT '5ece9bbb71323015' HASH 'a3610e1be66041b5963e6924326e064dc3a8cb1a65045e30ce9085a253533028' ADMIN;         
CREATE MEMORY TABLE "PUBLIC"."CAR_BRAND"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 30) NOT NULL,
    "NAME" CHARACTER VARYING(100) NOT NULL,
    "PARENT_ID" BIGINT
);  
ALTER TABLE "PUBLIC"."CAR_BRAND" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_C" PRIMARY KEY("ID");    
-- 29 +/- SELECT COUNT(*) FROM PUBLIC.CAR_BRAND;              
INSERT INTO "PUBLIC"."CAR_BRAND" VALUES
(1, 'Mercedes-Benz', NULL),
(2, 'BMW', NULL),
(3, 'Audi', NULL),
(4, U&'Citro\00ebn', NULL),
(5, 'C klass', 1),
(6, 'C 160', 5),
(7, 'C 180', 5),
(8, 'C 200', 5),
(9, 'C 220', 5),
(10, '3 seeria', 2),
(11, '315', 10),
(12, '317', 10),
(13, '319', 10),
(14, '4 seeria', 2),
(15, '5 seeria', 2),
(16, '518', 15),
(17, '523', 15),
(18, '524', 15),
(19, 'e-tron', 3),
(20, 'Q seeria', 3),
(21, 'Q2', 20),
(22, 'Q4', 20),
(23, 'Q5', 20),
(24, 'Q7', 20),
(25, 'RS seeria', 3),
(26, 'RS4', 25),
(27, 'RS5', 25),
(28, 'RS6', 25),
(29, 'TT', 3); 
CREATE MEMORY TABLE "PUBLIC"."CONTACT"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 3) NOT NULL,
    "FULL_NAME" CHARACTER VARYING(100) NOT NULL,
    "PHONE" CHARACTER VARYING(20) NOT NULL,
    "VALID_DRIVER_LICENSE" BOOLEAN DEFAULT FALSE
);         
ALTER TABLE "PUBLIC"."CONTACT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_6" PRIMARY KEY("ID");      
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.CONTACT; 
INSERT INTO "PUBLIC"."CONTACT" VALUES
(1, 'Mati Test', '1234567', TRUE),
(2, 'Kati Testimas', '8765432', TRUE);             
CREATE MEMORY TABLE "PUBLIC"."CONTACT_CARBRANDS"(
    "CONTACT_ID" BIGINT NOT NULL,
    "CARBRAND_ID" BIGINT NOT NULL
);   
ALTER TABLE "PUBLIC"."CONTACT_CARBRANDS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_E" PRIMARY KEY("CONTACT_ID", "CARBRAND_ID");     
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.CONTACT_CARBRANDS;       
INSERT INTO "PUBLIC"."CONTACT_CARBRANDS" VALUES
(2, 23),
(1, 24),
(1, 18),
(1, 4);        
ALTER TABLE "PUBLIC"."CONTACT_CARBRANDS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_E0" FOREIGN KEY("CONTACT_ID") REFERENCES "PUBLIC"."CONTACT"("ID") NOCHECK;       
ALTER TABLE "PUBLIC"."CONTACT_CARBRANDS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_E03" FOREIGN KEY("CARBRAND_ID") REFERENCES "PUBLIC"."CAR_BRAND"("ID") NOCHECK;   
ALTER TABLE "PUBLIC"."CAR_BRAND" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_C5" FOREIGN KEY("PARENT_ID") REFERENCES "PUBLIC"."CAR_BRAND"("ID") NOCHECK;              
